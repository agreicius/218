<section xml:id="sec_pdfuncsandabsval">
  <title>Piecewise-defined functions and absolute value</title>
    <objectives>
    <ul>
      <li>
        <p>
          Know the definition of piecewise-defined and absolute value functions
        </p>
      </li>
      <li>
        <p>
          Calculate values of piecewise-defined and absolute value functions
        </p>
      </li>
      <li>
        <p>
          Be able to graph piecewise-defined and absolute value functions
        </p>
      </li>
      <li>
        <p>
          See a few applications where piecewise-defined and absolute value functions are useful
        </p>
      </li>
    </ul>
    </objectives>
  <subsection>
    <title>Piecewise-defined functions</title>
    <p>
      So far, you have learned about the different types of algebraic functions.
      In this section we discuss functions that are NOT algebraic functions.
      Instead, they are pieced together by parts of algebraic functions.
    </p>
    <p>
      A piecewise-defined function is 
      is a function that is defined in multiple pieces,
      with different formulas or rules for different parts of its domain. The <em>sign function</em> defined below is a natural first example in light of our recent work with sign diagrams. 
    </p>
    <definition xml:id="d_sign">
    <title>Sign function</title>
    <notation>
      <usage><m>\operatorname{sign}</m></usage>
      <description>the sign function</description>
    </notation>
    <statement>
    <p>
    The <term>sign function</term>, <m>\sgn</m>, is the function <m>\sgn\colon \R\rightarrow \R</m> defined as 
    <men xml:id="eq_sign_func">
        \operatorname{sgn}(x) = \begin{cases}1, \amp \text{if } x&gt; 0\\ 0, \amp \text{if } x=0\\ -1, \amp \text{if } x&lt; 0. \end{cases}
    </men>
    In other words, <m>\sgn(x)</m> is 1 if <m>x</m> is positive, -1 if <m>x</m> is negative, and 0 otherwise. 
    </p>
    </statement>
    </definition>
    <p>
      The notation in <xref ref="eq_sign_func"/> is our way of presenting the different rules that apply to the different subsets of the domain. In general if the domain of our piecewise-defined functionis broken up into subsets <m>D_1, D_2,\dots,</m>, then the notation 
      <me>
        f(x)=\begin{cases}
        f_1(x)\amp \text{if } x\in D_1\\
        f_2(x)\amp \text{if } x\in D_2\\
        \vdots \\
        \end{cases}
      </me>
      is understood as defining <m>f</m> to be the function that follows the rule (or formula) <m>f_1</m> on the ``domain piece" <m>D_1</m>, <m>f_2</m> on the ``domain piece" <m>D_2</m>, <etc/>. In the case of the sign function, the three different rules are particular simple: namely, the function outputs 1, 0, or -1 depending on whether the input is positive, zero, or negative.
    </p>
    <p>
      Once you get used to the notation, you will see that working with piecewise-defined functions is done much the same as usual. However, because the a piecewise function is defined <em>in cases</em>, our computations involving these functions naturally break up into cases (or parts). 
    </p>
    <p>
      For example, when graphing the <m>\sgn</m> function, we effectively make three separate graphs over the separate pieces of the domain: we graph the constant function <m>f(x)=1</m> on <m>(0,\infty)</m>, we graph the function <m>f_2(x)=-1</m> on <m>(-\infty, 0)</m>, and we add the single point <m>(0,0)</m> to complete the graph. 
    </p>
    <figure xml:id="fig_signfunc">
      <caption>Graph of <m>y=\sgn(x)</m>.</caption>
      <image width="50%">
      <latex-image>
        \begin{tikzpicture}
          \begin{axis}[
              axis lines = middle,
              ymin=-1.5, ymax=1.5,
              xmin=-2.5, xmax=2.5,
              xtick={-2,-1,0,1,2},
              ytick={-1,-.5,.5,1},
              grid=both,
              width=6cm,
              height=5cm,
              domain=-5:5,
              samples=100
            ]
            \addplot[domain=-2.5:-.1, thick, blue,&lt;-] {-1};
            \addplot[domain=0.1:2.5, thick, blue,-&gt;] {1};
            \addplot[only marks, blue, mark=*, mark size=2pt] coordinates {(0,0)};
            \addplot[only marks, blue, mark=o, mark size=2pt] coordinates {(0,1)};
            \addplot[only marks, blue, mark=o, mark size=2pt] coordinates {(0,-1)};
          \end{axis}
        \end{tikzpicture}
      </latex-image>
    </image>
    </figure>
    <example>
      <statement>
        <p>
          Let <m>f</m> be the function defined piecewise as
          <me>
            f(x) = \begin{cases}x^2\amp  \text{if }  x\leq -1\\ 2x \amp \text{if } x&gt; -1 \end{cases}
          </me>.
          To graph <m>f</m> we graph the function <m>g(x)=x^2</m> on the domain <m>(-\infty, -1]</m> and the function <m>h(x)=2x</m> on the domain <m>(-1,\infty)</m>. Note that we must be careful about the value of <m>f</m> at the cutoff input <m>x=-1</m>. Since this value is included in the first case of the definition, we have <m>f(-1)=(-1)^2=1</m>, corresponding to the point <m>P=(-1,1)</m> on the graph below. 
        </p> 
        <figure xml:id="fig_TaalmanPage46c">
          <caption>Graph of <m>f(x)=\begin{cases}x^2\amp  \text{if }  x\leq -1\\ 2x \amp \text{if } x&gt; -1 \end{cases}</m></caption>
          <image width="60%" source="TaalmanPage46c.png"/>
        </figure>
      </statement>
    </example>
    
  </subsection>
  <subsection>
    <title>An Application of Piecewise-defined Functions</title>
    <p>
      Piecewise-defined functions are useful for many real-word problems where the relationship between the quantities involved are different on different time-frames.
      For example, a person's salary changes when they get a raise,
      which changes the amount that they earn each year.
    </p>
    <example xml:id="ex_incomefunction">
      <statement>
        <p>
          Suppose that in your first job after graduating from college you make $36,000 a year before taxes.
          After four years you get a raise of $2,500.
          Two years after that you change jobs and go to work for a company that pays you $49,000 a year.
        </p>
        <p>
          We can construct a piecewise-defined function that describes your pretax income in the year that is <m>t</m> years after you graduate from college as follows.
          Note that this is just the function that describes your income rate per year at a time <m>t</m>
          (the units are dollars per year).
          <me>
            \text{ income } (t) = \begin{cases}36000,\amp  \text{ if } 0\leq t\lt 4\\ 38500,\amp  \text{ if } 4\leq t\lt 6\\ 49000,\amp  \text{ if } t\geq6 \end{cases}
          </me>
        </p>
        <p>
          What may be more interesting is to describe that amount that you will have <em>earned</em>
          <m>t</m> years after graduating from college.
          During the first four years, you make $36,000 per year,
          and so the amount that you earn after <m>t</m> years is <m>36000t</m>.
          After four years,
          you have already earned $<m>36,000\cdot 4 = 144,000</m>.
          Then for the next two years, you earn $38,500 per year,
          so your additional income for
          <m>4\leq t\lt 6</m> is given by <m>38500(t-4)</m>
          (because we have to measure in years
          <em>since</em> <m>t=4</m>).
          Thus overall for <m>4\leq t\lt 6</m>,
          you have earned <m>144000+38500(t-4)</m> by time <m>t</m>.
          Lastly, after 6 years you have earned $<m>36,000\cdot 4+38,500\cdot2 = 221,000</m>,
          and for each additional year you earn $49,000,
          so by time <m>t</m> you have earned <m>21000+4900(t-6)</m> when <m>t\geq 6</m>.
        </p>
        <p>
          Summarizing this, the function for total <em>earnings</em>
          at time <m>t</m> years since graduation is
          <me>
            \text{ earnings } (t) = \begin{cases}36000t,\amp  \text{ if } 0\leq t\lt 4\\ 144000+38500(t-4),\amp  \text{ if } 4\leq t\lt 6\\ 221000+49000(t-6),\amp  \text{ if } t\geq 6 \end{cases}
          </me>
        </p>
        <p>
          If you continue at that pay rate,
          how long will it have taken you to earn a million dollars?
          Well, we know we did not make that much by <m>t=6</m>,
          so we use the equation for <m>t\geq 6</m> and solve for <m>t</m>:
          <me>
            \begin{aligned}221000+49000(t-6) \amp = 1000000\\ 49000(t-6) \amp = 779000\\ t-6 \amp = \frac{779000}{49000}\approx 15.8980\\ t \amp \approx 21.8980 \end{aligned}
          </me>
        </p>
        <p>
          So in your 22nd year after graduating you will have earned one million pretax dollars.
        </p>
      </statement>
    </example>
    <exercise>
      <statement>
        <p>
          How much will you have earned five years after graduating,
          according to the model described in Example <xref ref="ex_incomefunction" />?
          What is your salary in that year?
        </p>
      </statement>
    </exercise>
    <example>
      <statement>
        <p>
          For another example,
          suppose a doctor charges a different amount of money based on the length of the appointment.<fn>
          Example from
          <url href="https://www.mathsisfun.com/sets/functions-piecewise.html">https://www.mathsisfun.com/sets/functions-piecewise.html</url>,
          accessed Sept 15, 2022.
          </fn>
          <ul>
            <li>
              <p>
                Up to 6 minutes costs $50
              </p>
            </li>
            <li>
              <p>
                Over 6 and up to 15 minutes costs $80
              </p>
            </li>
            <li>
              <p>
                Over 15 minutes costs $80 plus $5 per minute above 15 minutes
              </p>
            </li>
          </ul>
        </p>
        <p>
          We can write the price <m>p</m> of an office visit like this:
          <me>
            p(t) = \begin{cases}50, \amp \text{ if } t\leq 6\\ 80, \amp  \text{ if } 6\lt t\leq 15\\ 80+5(t-15), \amp  \text{ if } t>15 \end{cases}
          </me>
        </p>
      </statement>
    </example>
  </subsection>
  <subsection>
    <title>Absolute value and distance</title>
    <p>
      For the rest of the section we will focus on one specific example of a piecewise-defined function that plays an essential role in calculus: the <em>absolute value function</em> <m>f(x)=\abs{x}</m>. What makes this function so valuable to us, is that it introduces a quantitative notion of <em>distance</em> to points on the real number line. Indeed, our first definition of the absolute value will be expressed entirely in these geometric terms. 
      <definition xml:id="d_absolute_value_geometric">
      <title>Absolute value (geometric)</title>
      <statement>
      <p>
      Given a real number <m>x\in \R</m> we define its <term>absolute value</term> to be the its distance from 0 on the number line. In more detail, <m>\abs{x}</m> is the length of the line segment between <m>0</m> and <m>x</m>. 
      </p>
      </statement>
      </definition>
      The diagram in <xref ref="fig_abs_num_line"/> illustrates how we compute <m>\abs{x}</m> using our geometric definition in terms of distance. From the indicated distances there, we see that 
      <md>
        <mrow>\abs{-2} \amp =\abs{2}=2</mrow>
        <mrow>\abs{-5} \amp =5</mrow>
      </md>.
      Furthermore, since the distance between the point <m>0</m> and itself is <m>0</m>, we see that <m>\abs{0}=0</m>. 
    </p>
    <figure xml:id="fig_abs_num_line">
        <caption>Understanding <m>\abs{x}</m> in terms of distance</caption>
      <image width="70%">
        <shortdescription>Number line diagram for absolute value</shortdescription>
        <latex-image>
\begin{tikzpicture}
% Draw number line
\draw[thick] (-6,0) -- (3,0);

% Points
\foreach \x in {-5,-2,0,2}
\draw[fill=blue] (\x,0) circle (3pt) node[below=4pt] {$\x$};

% Upper curly braces (curve upward)
\begin{scope}[decoration={calligraphic brace, amplitude=6pt}, thick]
\draw[decorate] (-2,0.4) -- node[above=6pt] {$d=2$} (0,0.4);
\draw[decorate] (0,0.4) -- node[above=6pt] {$d=2$} (2,0.4);
\end{scope}

% Higher curly brace (curve upward, use mirror to curve downward)
\begin{scope}[decoration={calligraphic brace, amplitude=6pt}, thick]
\draw[decorate] (-5,1.2) -- node[above=6pt] {$d=5$} (0,1.2);
\end{scope}
\end{tikzpicture}
        </latex-image>
      </image>
    </figure>
  <p>
    Exploring our geometric definition further, we see that for any positive number <m>a</m>, we have 
    <me>
      \abs{a}=\abs{-a}=a
    </me>.
    This is because both points <m>a</m> and <m>-a</m> are a distance of <m>a</m> from the point <m>0</m>. 
  </p>
  <image width="60%">
    <shortdescription>Absolute value of a positive number and its minus</shortdescription>
    <latex-image>
     \begin{tikzpicture}
  % Draw number line
  \draw[thick] (-3,0) -- (3,0);

  % Points
  \foreach \x/\y in {-2/{-a},0/0,2/a}
    \draw[fill=blue] (\x,0) circle (3pt) node[below=4pt] {$\y$};

  % Upper curly braces (curve upward)
  \begin{scope}[decoration={calligraphic brace, amplitude=6pt}, thick]
    \draw[decorate] (-2,0.4) -- node[above=6pt] {$d=a$} (0,0.4);
    \draw[decorate] (0,0.4) -- node[above=6pt] {$d=a$} (2,0.4);
  \end{scope}

\end{tikzpicture}

    </latex-image>
  </image>
<p>
  Put another way, given any real number <m>x</m>, to specify its location on the number line, we need <em>two</em> pieces of information: 
  <ol>
    <li>
      <p>
        whether <m>x</m> lies to the <em>left</em> or <em>right</em> of <m>0</m>;
      </p>
    </li>
    <li>
      <p>
        the distance from <m>x</m> to <m>0</m>.
      </p>
    </li>
  </ol>
  The first piece of information is given by the <em>sign</em> of <m>x</m>: that is, <m>x</m> lies to the left of <m>0</m> if and only if <m>x&lt; 0</m>, and to the right if and only if <m>x&gt; 0</m>. The second piece of information is given by the absolute value <m>\abs{x}</m>. In this light, you can think of the absolute value function as ignoring the sign of a number and just returning its distance to zero. This is another explanation of why <m>\abs{a}=\abs{-a}</m>. 
</p>
 <remark xml:id="rm_greater_less_large">
            <title>Large and small, greater than and less than</title>
            <p>
                The foregoing discussion brings to light some linguistic subtleties surrounding mathematical notions like  the <m>&lt;</m> relation, the <m>&gt;</m> relation, and the absolute value <m>\abs{x}</m>. 
            </p>
            <p>
              Namely, although the two relations <m>&lt;</m> and <m>&gt;</m> are translated into English as <q>less than</q> and <q>greater than</q>, a statement like <m>x&lt; y</m> is not an indication of the relative <em>size</em> (or <em>magnitude</em>) of <m>x</m> and <m>y</m>, but rather their relative <em>position</em> on the real number line! In this sense, the correct geometric way to think of the statement <m>x&lt; y</m> is as follows: 
              <md>
                <mrow>x&lt; y \amp \iff x \text{ lies to the left  of } y \text{ on the number line} </mrow>
                <mrow> \amp \iff  y \text{ lies to the right  of } y \text{ on the number line} </mrow>
              </md>.
            By contrast, the <em>size</em> of a number <m>x</m> is measured by its absolute value <m>\abs{x}</m>. Moreover, to say one number is <em>smaller</em> or <em>larger</em> than another is to say its absolute value is less than or greater than the other number's absolute value: <ie/>, we have 
            <md>
              <mrow>\abs{x}&lt; \abs{y} \amp \iff x \text{ is smaller than } y</mrow>
              <mrow> \amp \iff y \text{ is larger than } x</mrow>
            </md>.
            As a result, the <em>sign</em> of a number has nothing to do with its size! To illustrate this, note that the three sequences of numbers below are all examples where the terms are getting arbitrarily large:
            <md>
              <mrow>1, \amp 10, 100, 1000, 10000,\dots </mrow>
              <mrow>-1, \amp -10, -100, -1000, -10000,\dots</mrow>
              <mrow>1, \amp -10, 100, -1000,10000,\dots </mrow>
            </md>. 
                In more detail we say that the first is a sequence of positive numbers that get arbitrarily large, the second a sequence of negative numbers that get arbitrarily large and negative, and the third a sequence of numbers of alternating sign that get arbitrarily large. 
                </p>
        </remark>
        <p>
          Our geometric definition of the absolute value function in terms of distance will be very important for conceptualizing calculus notions like limits, continuity, and derivatives. However, for computaitonal purposes it is convenient to have a more algebraic definition of the absolute value. Here the notion of a piecewise-defined function comes to our aid. 
        </p>
    <definition xml:id="d_absval">
      <title>Absolute value (piecewise)</title>
      <statement>
        <p>
         Given a real number <m>x</m>, we definte its <term>absolute value</term> <m>\abs{x}</m> as follows:
         <men xml:id="eq_abs_val">
          \abs{x}=\begin{cases}
          x\amp \text{if } x\geq 0\\
          -x\amp \text{if } x&lt; 0
          \end{cases}
         </men>.
         The function <m>f\colon \R\rightarrow \R</m> defined as <m>f(x)=\abs{x}</m> is called the <term>absolute value function</term>. 
        </p>
      </statement>
    </definition>
    <p>
      Let's see how <xref ref="d_absolute_value"/> agrees with our previous geometric definition of the absolute value.
    </p>
    <example xml:id="eg_abs_value">
    <title>Absolute value (piecewise)</title>
    <statement>
    <p>
    Use <xref ref="d_absolute_value"/> to compute the following. 
    <ol>
      <li>
        <p>
          <m>\abs{2}</m>
        </p>
      </li>
      <li>
        <p>
          <m>\abs{-2}</m>
        </p>
      </li>
      <li>
        <p>
          <m>\abs{-5}</m>
        </p>
      </li>
      <li>
        <p>
          <m>\abs{0}</m>
        </p>
      </li>
    </ol>
    </p>
    </statement>
    <solution>
    <p>
    <ol>
      <li>
        <p>
          Since <m>2\geq 0</m>, we use the first case in <xref ref="eq_abs_val"/> to compute <m>\abs{2}</m>:
          <md>
            <mrow>\abs{2} \amp =2 \amp (\text{since } 2\geq 0)</mrow>
          </md>.
        </p>
      </li>
      <li>
        <p>
          Since <m>-2&lt; 0</m>, we use the second case in <xref ref="eq_abs_val"/> to compute <m>\abs{-2}</m>:
          <md>
            <mrow>\abs{-2} \amp = -(-2) \amp (\text{since } -2&lt; 0)</mrow>
            <mrow> \amp =2</mrow>
          </md>.
          This example illustrates how, despite the <m>-x</m> appearing in the formula for the second case of <xref ref="d_absolute_value"/>, the output of the absolute value function is always nonnegative. 
        </p>
      </li>
      <li>
        <p>
          Similarly, since <m>-5&lt; 0</m>, we use the second case in <xref ref="eq_abs_val"/> to compute <m>\abs{-5}</m>:
          <md>
           <mrow>\abs{-5} \amp = -(-5) \amp (\text{since } -5&lt; 0)</mrow>
            <mrow> \amp =5</mrow>
          </md>.
        </p>
      </li>
      <li>
        <p>
          Lastly, the first case of the definition applies to <m>x=0</m>, allowing us to compute <m>\abs{0}=0</m>. 
        </p>
      </li>
    </ol>
    </p>
    </solution>
    </example>
    <remark>
      <title>Absolute value (piecewise)</title>
      <p>
        As the last example illustrates, despite the <m>-x</m> formula appearing in the second case of the piecewise definition of <m>\abs{x}</m>, the output is always nonnegative. This is because the second case only applies if the the input <m>x</m> is itself <em>negative</em>, in which case the output <m>-x</m> is <em>positive</em>!
      </p>
    </remark>
    <p>
      With two separate definitions of the absolute value in play, the question naturally arises whether they agree! The last example gives evidence to the fact that they do. Here is how to see this more generally. For any real number <m>x</m>, we can write <m>x=a</m> or <m>x=-a</m>, where <m>a</m> is a <em>nonnegative</em> number. Since <xref ref="d_absolute_value"/> defines <m>\abs{x}</m> in cases, it is natural to look at the two cases <m>x=a</m> and <m>x-a</m> separately.
    </p>
    <p>
      If <m>x=a</m> for some nonnegative number <m>a</m>, then it lies a distance of <m>a</m> to the right of <m>0</m>, and hence we should have <m>\abs{x}=a</m> according to <xref ref="d_absolute_value_geometric"/>. Using <xref ref="d_absolute_value"/>, we have 
      <md>
        <mrow>\abs{x} \amp =\abs{a}</mrow>
        <mrow> \amp =a \amp (\text{since } a\geq 0)</mrow>
      </md>,
      as desired. Thus we see that the two definitions agree in this case.
    </p>
    <p>
      The other case is similar. Suppose <m>x=-a</m> for some nonnegative number <m>a</m>. In this case <m>x</m> lies a distance of <m>a</m> to the left of <m>0</m>, and hence has absolute value <m>\abs{x}=a</m> according to <xref ref="d_absolute_value_geometric"/>. We get the same result using <xref ref="d_absolute_value"/>, since 
      <md>
        <mrow>\abs{x} \amp =\abs{-a}</mrow>
        <mrow> \amp =-(-a) \amp (\text{since } -a\leq 0)</mrow>
        <mrow> \amp = a</mrow>
      </md>.
    </p>
    <p>
      This arguing by case can be seen at work in the proof of the next result, which among other things, shows that the absolute value function is in fact an algebraic function! 
    </p>
    <theorem xml:id="th_abs_value_alg">
    <title>Absolute value function is algebraic</title>
    <statement>
    <p>
    For all <m>x\in \R</m> we have 
    <men xml:id="eq_abs_radical">
      \sqrt{x^2}=\abs{x}
    </men>.
    It follows that the absolute value function <m>f(x)=\abs{x}</m> is algebraic. 
    </p>
    </statement>
    <proof>
    <p>
      First observe that identity <xref ref="eq_abs_radical"/> implies that <m>f(x)=\abs{x}</m> is algebraic as it can written as a composition of two power functions.  We will use <xref ref="d_absolute_value"/> to prove the identity, and thus argue the two cases <m>x\geq 0</m> and <m>x&lt; 0</m> separately.  
    </p>
    <case>
    <title>Case: <m>x\geq 0</m></title>
    <p>
    Assume <m>x\geq 0</m>. First observe that by definition <m>\sqrt{x^2}</m> is the unique <em>nonnegative</em> square-root of <m>x^2</m>. Since <m>x</m> is clearly a square-root of <m>x^2</m>, and since <m>x\geq 0</m>, we have 
    <md>
      <mrow>\sqrt{x^2} \amp =x </mrow>
      <mrow> \amp =\abs{x} \amp (\text{since } x\geq 0)</mrow>
    </md>,
    as desired.
    </p>
    </case>
    <case>
    <title>Case: <m>x&lt; 0</m></title>
    <p>
    Now assume <m>x&lt; 0</m>. Since <m>-x</m> is a square-root of <m>x^2</m> and is positive, we have in this case
    <md>
      <mrow>\sqrt{x^2} \amp =-x</mrow>
      <mrow> \amp =\abs{x} \amp (\text{since } x&lt; 0)</mrow>
    </md>,
    as desired. 
    </p>
    </case>
    
    </proof>
    </theorem>
    <warning>
      <title>Identities involving <m>\sqrt{x^2}</m> </title>
      <p>
        It is a very common error, among students and instructors alike, to omit the absolute value in the identity <xref ref="eq_abs_radical"/> and erroneously simplify the expression <m>\sqrt{x^2}</m> to <m>x</m>. To see why this is invalid, it is enough to consider the example <m>x=-1</m>: 
        <me>
          x=-1 \implies \sqrt{x^2}=\sqrt{1}=1\ne x
        </me>.
        The example also illustrates what exactly the issue is here: the principal square root function <m>\sqrt{\underline{\phantom{xx}}}</m> always picks out the <em>nonnegative</em> square root of its input. In particular, its output can never be negative. This alone guarantees that <m>\sqrt{(-1)^2}\ne -1</m>.
      </p>
      <p>
        One explanation for the prevalence of this error is that in many cases it is tacitly assumed that <m>x</m> is nonnegative, in which case the identity holds without the absolute value since  
        <m>\sqrt{x^2}=\abs{x}=x</m> for all <m>x\geq 0</m>. 
      </p>
      <p>
        The moral of the story is that the validity of a given identity depends very much on the precise scope of its application. Put another way, the quantifier expression <q>for all <m>x</m> satisfying...</q> plays a very important role in the statement of the identity. Sometimes, when stating an identity, we will include this quantifier expression for clarity. For example, here are two correct identities involving a similar equality, but different scopes of application: 
        <md>
          <mrow>\sqrt{x^2} \amp =x \text{ for all } x\geq 0</mrow>
          <mrow>\sqrt{x^2} \amp =\abs{x} \text{ for all } x\in \R</mrow>
        </md>.
      </p>
    </warning>
    <p>
      The identity <m>\abs{x}=\sqrt{x^2}</m> allows us to derive many useful properties of the absolute value function from those of the principal square-root function. Furthermore, knowing now that <m>f(x)=\abs{x}</m>, we can make use of <xref ref="th_constancy_sign"/> and <xref ref="proc_solve_ineq"/> to deterimine solutions to inequalities involving the absolute value. We include these results here in one compendium result. We will spare you the details of a proof, but invite you to think on your own about how you would proves these facts. 
    </p>
    <theorem xml:id="th_abs_value">
    <title>Properties of absolute value</title>
    <statement>
    <p>
    <ol>
      <li>
        <p>
          We have 
          <men xml:id="eq_abs_prod">
            \abs{xy}=\abs{x}\abs{y}
          </men>
          for all <m>x,y\in \R</m>, 
          and 
          <men xml:id="eq_abs_quot">
            \abs{\frac{x}{y}}=\frac{\abs{x}}{\abs{y}}
          </men>
          for all <m>x,y\in \R</m> with <m>y\ne 0</m>. 
        </p>
        <p>
          In plain English: the absolute value of a product is the product of the absolute values, and the absolute value of a quotient is the quotient of the absolute values.
        </p>
      </li>
      <li>
        <p>
         For any <m>a\geq 0</m>, we have 
         <mdn>
          <mrow xml:id="eq_abs_equal"> \abs{x}= a \amp \iff x=a \text{ or } x=-a</mrow>
          <mrow xml:id="eq_abs_lesser"> \abs{x}&lt; a\amp \iff -a&lt; x &lt; a </mrow>
          <mrow xml:id="eq_abs_greater"> \abs{x}&gt; a \amp \iff x&gt; a \text{ or } x&lt; -a </mrow>
         </mdn>.
        </p>
      </li>
    </ol>
    </p>
    </statement>
    </theorem>
    <example xml:id="eg_solve_abs">
    <title>Absolute value algebra</title>
    <statement>
    <p>
    Solve the given equation or inequality.
    <ol>
      <li>
        <p>
          <m>\abs{2-x}=9</m>
        </p>
      </li>
      <li>
        <p>
          <m>\abs{x}&gt; \frac{3}{\abs{x-2}}</m>
        </p>
      </li>
    </ol> 
    </p>
    </statement>
    <solution>
    <p>
    <ol>
      <li>
        <p>
          We use the property <xref ref="eq_abs_equal"/>:
          <md>
            <mrow>\abs{2-x} \amp =9</mrow>
            <mrow>2-x=9 \amp \text{ or } 2-x=-9</mrow>
            <mrow>x=-7 \amp \text{ or } x=11</mrow>
          </md>.
        </p>
      </li>
      <li>
        <p>
          We solve as follows:
         <md>
          <mrow>\abs{x} \amp &gt; \frac{3}{\abs{x-2}}</mrow>
          <mrow>\abs{x}\cdot\abs{x-2} \amp &gt; 3 \amp (\abs{x-2}&gt; 0)</mrow>
          <mrow>\abs{x^2-2x} \amp &gt; 3 \amp <xref ref="eq_abs_prod"/></mrow>
          <mrow>x^2-2x &gt; 3 \amp \text{ or } x^2-2x &lt; -3 \amp <xref ref="eq_abs_lesser"/> </mrow>
          <mrow>x^2-2x-3&gt; 0 \amp \text{ or } x^2-2x+3&lt; 0</mrow>
          <mrow>(x-3)(x+1)&gt; 0 \amp \text{ or } (x-1)^2+2&lt; 0 </mrow>
          <mrow>x&gt; 3 \text{ or } x&lt; -1   \amp   </mrow>
         </md>.
         Here the last line follows from a sign analysis of <m>f(x)=(x-3)(x+1)</m> (or alternatively, by constructing a sign diagram) and the fact that <m>(x-1)^2+2\geq 2</m> for all <m>x</m>, and hence never satisfies <m>(x-1)^2+2&lt; 0</m>. 
          We conclude that the solution set is <m>(-\infty, -1)\cup (3,\infty)</m>. 
        </p>
      </li>
    </ol>
    </p>
    </solution>
    </example>
    <p>
      Before moving on to graphs of functions involving absolute value, we generalize our distance formula 
      <me>
        \abs{x}=\text{distance between } x \text{ and } 0
      </me>
      to a notion of distance between any two points on the real line.
    </p>
    <definition xml:id="d_distance_real_line">
    <title>Distance function on <m>\R</m></title>
    <statement>
    <p>
    Let <m>a,b\in \R</m>. We define the <term>distance</term> <m>d(a,b)</m> between   <m>a</m> and <m>b</m> to be 
    <men xml:id="eq_distance">
      d(a,b)=\abs{a-b}=\abs{b-a}
    </men>.
    Geometrically, <m>d(a,b)</m> is the length of the line segment between <m>a</m> and <m>b</m>, considered as points on the real line.
    </p>
    </statement>
    </definition>
    <remark>
    <title>Distance function on <m>\R</m></title>
    <p>
      The notion of distance <m>d(a,b)=\abs{a-b}=\abs{b-a}</m> between points on the real line will be used extensively in our development of calculus. This in turn is why a solid understanding of the absolute value function is so important. We content ourselves with a few short comments. 
      <ol>
        <li>
          <p>
            Note that our definition <xref ref="eq_distance"/> generalizes the distance to 0 formula, since for any <m>x\in \R</m> we have 
            <me>
              d(x,0)=\abs{x-0}=\abs{x}
            </me>.
          </p>
        </li>
        <li>
          <p>
            The fact that <m>d(a,b)</m> is the length of the line segment between <m>a</m> and <m>b</m> can be shown to follow from <xref ref="d_absolute_value_geometric"/> using a nice <q>shift argument</q>. By way of illustration, consider <m>a=-3</m> and <m>b=7</m>. Shifting these points to the right by three units yields new points <m>a'=0</m> and <m>b'=10</m>. Shifting the two points this way does not change the distance between them: <ie/>, <m>d(a,b)=d(a',b')</m>. It follows that
            <md>
              <mrow>d(a,b) \amp =d(a',b')</mrow>
              <mrow> \amp = d(0,10)</mrow>
              <mrow> \amp =\abs{10} \amp (<xref ref="d_absolute_value_geometric" text="global"/>) </mrow>
              <mrow> \amp =\abs{10-3+3} </mrow>
              <mrow> \amp =\abs{7-(-3)} </mrow>
              <mrow> \amp =\abs{b-a}</mrow>
            </md>,
            as claimed.
          </p>
        </li>
        <li>
          <p>
            Fix a point <m>a</m> on the real line. The closeness or farness of a variable point <m>x</m> to <m>a</m> is measured by its distance <m>d(x,a)=\abs{x-a}</m>. Thus we have 
            <md>
              <mrow>x \text{ close to } a \amp \iff \abs{x-a} \text{ is small (i.e. close to zero)}</mrow>
              <mrow>x \text{ far from } a \amp \iff \abs{x-a} \text{ is large}</mrow>
            </md>.
          </p>
        </li>
      </ol>
    
    </p>
    </remark>
    
  </subsection>
  <subsection>
    <title>Graphs of absolute values</title>
    <p>
      It remains only to consider the graph of <m>f(x)=\abs{x}</m>, and more generally, graphs of functions involving absolute value. Using the piecewise definition of <m>f(x)=\abs{x}</m>, we can produce its graph very easily by looking at the two cases <m>x\geq 0</m> and <m>x&lt; 0</m> separately. We have 
      <md>
        <mrow>x\geq 0 \amp \implies \abs{x}=x \implies f(x)=x</mrow>
        <mrow>x&lt; 0 \amp \implies \abs{x}=-x\implies f(x)=-x</mrow>
      </md>.
      Thus the graph of <m>f</m> is given by the graph of the line <m>y=x</m> for all <m>x\geq 0</m> and the line <m>y=-x</m> for all <m>x&lt; 0</m>. This gives rise to the vee-shaped graph in <xref ref="fig_abs_val_graph"/>. 
    </p>
    <figure xml:id="fig_abs_val_graph">
      <caption>Graph of <m>f(x)=\abs{x}</m></caption>
      <image width="60%">
        <shortdescription>Graph of absolute value function</shortdescription>
        <latex-image>
         \begin{tikzpicture}
  \begin{axis}[
    axis lines = middle,
%    xlabel = $x$,
%    ylabel = {$f(x)$},
    xtick={-4,-3,-2,-1,1,2,3,4},
    ytick={1,2,3,4},
    ymin=-0.5, ymax=4,
    xmin=-4.5, xmax=4.5,
    grid=both,
    width=8cm,
    height=6cm,
    grid style={line width=.1pt, draw=gray!10},
    major grid style={line width=.2pt,draw=gray!50},
    minor tick num=1,
    every tick/.style={black,thick},
    ]
    \addplot[domain=-4:4, thick, samples=200, color=blue]{abs(x)};
  \end{axis}
\end{tikzpicture}
        </latex-image>
      </image>
    </figure>
    <p>
      More generally, how do we graph a function of the form <m>f(x)=\abs{g(x)}</m>? We can analyze this question using the piecewise definition of absolute value, along with our graphical interpretation of the scaling transformation. By definition, we have 
      <me>
        \abs{g(x)}=\begin{cases} g(x) \amp \text{if } g(x)\geq 0 \\ -g(x)\amp \text{if } g(x)&lt; 0.
      \end{cases}
      </me>
      Thus we can obtain the graph of <m>f(x)=\abs{g(x)}</m> by graphing <m>g(x)</m> at all <m>x</m> where <m>g(x)\geq 0</m>, and <m>-g(x)</m> at all <m>x</m> where <m>g(x)&lt; 0</m>. Since the graph of <m>-g</m> is the result of reflecting the graph of <m>g</m> over the <m>x</m>-axis, we see that <m>f(x)=\abs{g(x)}</m> can be obtained by beginning with the graph of <m>g</m> and flipping all portions of the graph where <m>g&lt; 0</m>. Let's make this an official procedure for good measure.
    </p>
    <algorithm xml:id="proc_graph_abs_g">
      <title>Graphing <m>f(x)=\abs{g(x)}</m></title>
    
      <statement>
        <p>
         The graph of <m>f(x)=\abs{g(x)}</m> is obtained from the graph of <m>g</m> by finding all portions of the graph of <m>g</m> where <m>g&lt; 0</m> and reflecting these over the <m>x</m>-axis. 
        </p>
      </statement>
    </algorithm>
    <example xml:id="eg_abs_val_graph_shift">
      <title>Transformed absolute value function</title>
      <statement>
        <p>
         Consider the function <m>f(x)=\abs{2x-1}</m>. We have <m>f(x)=\abs{g(x)}</m>, where <m>g(x)=2x-1</m>. Since <m>g(x)&lt; 0</m> if and only if <m>x&lt; 1/2</m>, we obtain the graph of <m>f</m> by flipping the part of the line <m>y=2x-1</m> that lies below the <m>x</m>-axis across the <m>x</m>-axis. 
        </p>
        <figure xml:id="fig_abs_val_graph_shift">
          <caption>Graph of <m>f(x)=\abs{2x-1}</m></caption>
          <sidebyside widths="46% 46%">
        <figure xml:base="fig_linear_inner">
         <caption>Graph of <m>g(x)=2x-1</m></caption>
         <image>
          <shortdescription>Graph of 2x-1</shortdescription>
          <latex-image>
             \begin{tikzpicture}
  \begin{axis}[
    axis lines = middle,
%    xlabel = $x$,
%    ylabel = {$f(x)$},
    xtick={-2,-1,1,2,3,4},
    ytick={-3,-2,...,3},
    ymin=-2.5, ymax=3.5,
    xmin=-1.5, xmax=2.5,
    grid=both,
    width=8cm,
    height=8cm,
    grid style={line width=.1pt, draw=gray!10},
    major grid style={line width=.2pt,draw=gray!50},
    minor tick num=1,
    every tick/.style={black,thick},
    ]
    \addplot[domain=-4:4, thick, samples=200, color=blue]{2*x-1};
  \end{axis}
\end{tikzpicture}
          </latex-image>
         </image>
        </figure>
       <figure xml:id="fig_abs_val_linear">
         <caption>Graph of <m>f(x)=\abs{2x-1}</m></caption>
         <image>
          <shortdescription>Graph of absolute value of 2x-1</shortdescription>
          <latex-image>
             \begin{tikzpicture}
  \begin{axis}[
    axis lines = middle,
%    xlabel = $x$,
%    ylabel = {$f(x)$},
    xtick={-2,-1,1,2,3,4},
    ytick={-3,-2,...,3},
    ymin=-2.5, ymax=3.5,
    xmin=-1.5, xmax=2.5,
    grid=both,
    width=8cm,
    height=8cm,
    grid style={line width=.1pt, draw=gray!10},
    major grid style={line width=.2pt,draw=gray!50},
    minor tick num=1,
    every tick/.style={black,thick},
    ]
    \addplot[domain=-4:4, thick, samples=200, color=blue]{abs(2*x-1)};
  \end{axis}
\end{tikzpicture}
          </latex-image>
         </image>
        </figure>
      </sidebyside>
    </figure>
      </statement>
    </example>
    
    <example>
      <title>Absolute value of quadratic</title>
      <statement>
        <p>
         Consider <m>f(x)=\abs{x^2-1}=\abs{g(x)}</m>, where <m>g(x)=x^2-1</m>. Our usual sign diagram argument shows that <m>g(x)&lt; 0</m> if and only if <m>-1&lt; x&lt; 1</m>. Thus we obtain the graph of <m>f</m> by flipping the part of the parabola <m>g(x)=x^2-1</m> lying over the interval <m>(-1,1)</m> across the <m>x</m>-axis. 
         </p>
         <figure xml:id="fig_graph_abs_quad">
          <caption>Graph of <m>f(x)=\abs{x^2-1}</m></caption>
          <sidebyside widths="46% 46%">
            <figure xml:id="fig_inner_quad">
              <caption>Graph of <m>g(x)=x^2-1</m></caption>
              <image>
                <shortdescription>Graph of x^2-1</shortdescription>
                <latex-image>
                   \begin{tikzpicture}
  \begin{axis}[
    axis lines = middle,
%    xlabel = $x$,
%    ylabel = {$f(x)$},
    xtick={-3,-2,...,3},
    ytick={-2,0,...,8},
    ymin=-2.5, ymax=8.5,
    xmin=-3.5, xmax=3.5,
    grid=both,
    width=8cm,
    height=8cm,
    grid style={line width=.1pt, draw=gray!10},
    major grid style={line width=.2pt,draw=gray!50},
    minor tick num=1,
    every tick/.style={black,thick},
    ] 
    \addplot[domain=-3:3, thick, samples=200, color=blue]{x^2-1};
  \end{axis}
\end{tikzpicture}
                </latex-image>
              </image>
            </figure>
<figure xml:id="fig_abs_quad_final">
  <caption>Graph of <m>f(x)=\abs{x^2-1}</m></caption>
  <image>
    <shortdescription>Graph of absolute value of x^2-1</shortdescription>
    <latex-image>
       \begin{tikzpicture}
  \begin{axis}[
   axis lines = middle,
%    xlabel = $x$,
%    ylabel = {$f(x)$},
    xtick={-3,-2,...,3},
    ytick={-2,0,...,8},
    ymin=-2.5, ymax=8.5,
    xmin=-3.5, xmax=3.5,
    grid=both,
    width=8cm,
    height=8cm,
    grid style={line width=.1pt, draw=gray!10},
    major grid style={line width=.2pt,draw=gray!50},
    minor tick num=1,
    every tick/.style={black,thick},
    ]
    \addplot[domain=-3:3, thick, samples=200, color=blue]{abs(x^2-1)};
  \end{axis}
\end{tikzpicture}
    </latex-image>
  </image>
</figure>
          </sidebyside>
         </figure>
        
      </statement>
    </example>
    
  </subsection>
  
</section>